(function(){"use strict";var e={9644:function(e,t,s){var a=s(9242),l=s(3396);const i={class:"container"},o={class:"app-wrapper"},n={class:"app-left"},d={class:"app-right"};function p(e,t,s,p,m,c){const r=(0,l.up)("project-data"),_=(0,l.up)("employees-list"),u=(0,l.up)("add-employee"),y=(0,l.up)("add-stage"),h=(0,l.up)("stages-list"),g=(0,l.up)("edit-modal");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",o,[(0,l._)("div",n,[(0,l.Wm)(r),(0,l.Wm)(_,{employeesData:this.$store.state.employeesData},null,8,["employeesData"]),(0,l.Wm)(u),(0,l.Wm)(y)]),(0,l._)("div",d,[(0,l.Wm)(h,{stagesData:this.$store.state.stages,onShowStageSetting:c.showStageSetting},null,8,["stagesData","onShowStageSetting"]),(0,l.Wm)(a.uT,null,{default:(0,l.w5)((()=>[m.showModal?((0,l.wg)(),(0,l.j4)(g,{key:0,selectedStage:m.selectedStage,onClick:t[0]||(t[0]=(0,a.iM)((e=>m.showModal=!1),["self"]))},null,8,["selectedStage"])):(0,l.kq)("",!0)])),_:1})])])])}var m=s(7139);const c=e=>((0,l.dD)("data-v-3ba5e28e"),e=e(),(0,l.Cn)(),e),r={class:"employees-list"},_={class:"list-item__wrapper"},u=c((()=>(0,l._)("div",{class:"list-item__nameplate"},"Имя",-1))),y=["disabled","onUpdate:modelValue"],h={class:"list-item__wrapper"},g=c((()=>(0,l._)("div",{class:"list-item__nameplate"},"Должность",-1))),v=["disabled","onUpdate:modelValue"],b={class:"list-item__wrapper"},f=c((()=>(0,l._)("div",{class:"list-item__nameplate"},"Дневная ставка, ТГ",-1))),w=["disabled","onUpdate:modelValue"],S={class:"btns-wrapper"},D=["onClick"],k=["onClick"];function P(e,t,s,i,o,n){return(0,l.wg)(),(0,l.iD)("ul",r,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.employeesData,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,m.C_)(["list-item",{modify:e.employeeModify}]),key:e.id},[(0,l._)("div",_,[u,(0,l.wy)((0,l._)("input",{class:"corrected-field",type:"text",disabled:!e.employeeModify,"onUpdate:modelValue":t=>e.name=t},null,8,y),[[a.nr,e.name]])]),(0,l._)("div",h,[g,(0,l.wy)((0,l._)("textarea",{class:"corrected-field",type:"text",disabled:!e.employeeModify,"onUpdate:modelValue":t=>e.position=t},null,8,v),[[a.nr,e.position]])]),(0,l._)("div",b,[f,(0,l.wy)((0,l._)("input",{class:"corrected-field",type:"number",disabled:!e.employeeModify,"onUpdate:modelValue":t=>e.bid=t},null,8,w),[[a.nr,e.bid]])]),(0,l._)("div",S,[(0,l._)("button",{class:"list-item__remove",onClick:t=>this.$store.commit("remooveEmployee",e.id)}," X ",8,D),(0,l._)("button",{class:"list-item__edit",onClick:t=>this.$store.commit("modifyEmployee",e.id)},null,8,k)])],2)))),128))])}var L={name:"EmployeesList",props:{employeesData:Array},data(){return{}},methods:{}},E=s(89);const C=(0,E.Z)(L,[["render",P],["__scopeId","data-v-3ba5e28e"]]);var U=C;const V={class:"project-data"},$=(0,l.uE)('<label class="project-data__item" data-v-80480628><span class="nameplate" data-v-80480628>Наименование работы</span><input type="text" class="input-field" data-v-80480628></label><label class="project-data__item" data-v-80480628><span class="nameplate" data-v-80480628>Клиент</span><input type="text" class="input-field" data-v-80480628></label>',2),I=[$];function j(e,t,s,a,i,o){return(0,l.wg)(),(0,l.iD)("div",V,I)}var M={name:"ProjectData"};const N=(0,E.Z)(M,[["render",j],["__scopeId","data-v-80480628"]]);var x=N;const O=e=>((0,l.dD)("data-v-6f3f580f"),e=e(),(0,l.Cn)(),e),Z={class:"add-employee"},T={class:"add-employee__label"},z=O((()=>(0,l._)("span",{class:"nameplate"},"ФИО сотрудника",-1))),W={class:"add-employee__label"},K=O((()=>(0,l._)("span",{class:"nameplate"},"Должность",-1))),A={class:"add-employee__label"},R=O((()=>(0,l._)("span",{class:"nameplate"},"Дневная ставка, ТГ",-1)));function B(e,t,s,i,o,n){return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("label",T,[z,(0,l.wy)((0,l._)("input",{class:"add-employee__field",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.employeeName=e)},null,512),[[a.nr,o.employeeName]])]),(0,l._)("label",W,[K,(0,l.wy)((0,l._)("input",{class:"add-employee__field",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.employeePosition=e)},null,512),[[a.nr,o.employeePosition]])]),(0,l._)("label",A,[R,(0,l.wy)((0,l._)("input",{class:"add-employee__field",type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.employeeBid=e)},null,512),[[a.nr,o.employeeBid]])]),(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>n.addEmployeeFnc&&n.addEmployeeFnc(...e)),class:"add-employee__btn btn"}," Добавить сотрудника ")])}var F={name:"AddEmployee",data(){return{employeeName:"",employeePosition:"",employeeBid:"",employeeId:""}},methods:{addEmployeeFnc(){this.employeeName.trim()&&this.employeePosition.trim()&&this.employeeBid&&(this.$store.commit("addEmployee",{name:this.employeeName,position:this.employeePosition,bid:this.employeeBid,id:`employeeId-${Math.random().toString(36).substring(2,9)}`}),this.employeeName="",this.employeePosition="",this.employeeBid="",this.employeeId="")}}};const H=(0,E.Z)(F,[["render",B],["__scopeId","data-v-6f3f580f"]]);var Y=H;const q=e=>((0,l.dD)("data-v-be07e702"),e=e(),(0,l.Cn)(),e),X={class:"add-stage"},G={class:"add-stage__label"},J=q((()=>(0,l._)("span",{class:"nameplate"},"Название стадии проекта",-1)));function Q(e,t,s,i,o,n){return(0,l.wg)(),(0,l.iD)("div",X,[(0,l._)("label",G,[J,(0,l.wy)((0,l._)("input",{class:"add-stage__field",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.stageName=e)},null,512),[[a.nr,o.stageName]])]),(0,l._)("button",{onClick:t[1]||(t[1]=(...e)=>n.addStage&&n.addStage(...e)),class:"add-stage__btn btn"}," Добавить стадию проекта ")])}var ee={name:"AddStage",data(){return{stageName:"",stageId:""}},methods:{addStage(){this.stageName.trim()&&(this.$store.commit("addStage",{name:this.stageName.trim(),id:`stageId-${Math.random().toString(36).substring(2,9)}`,phases:[]}),this.stageName="",this.stageId="")}}};const te=(0,E.Z)(ee,[["render",Q],["__scopeId","data-v-be07e702"]]);var se=te;const ae={class:"stages"},le={class:"list-item__name"},ie=["onClick"],oe=(0,l.uE)('<div class="list-item__wrapper" data-v-67db5d76><div class="list-item__block" data-v-67db5d76><span class="nameplate" data-v-67db5d76>Колличество этапов:</span><span class="info" data-v-67db5d76>2</span></div><div class="list-item__block" data-v-67db5d76><span class="nameplate" data-v-67db5d76>Задействовано сотрудников:</span><span class="info" data-v-67db5d76>5</span></div><div class="list-item__block" data-v-67db5d76><span class="nameplate" data-v-67db5d76>Стоимость стадии:</span><span class="info" data-v-67db5d76>800 000 тг</span></div></div>',1);function ne(e,t,s,a,i,o){return(0,l.wg)(),(0,l.iD)("ul",ae,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.stagesData,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"list-item",key:e.id},[(0,l._)("div",le,(0,m.zw)(e.name),1),(0,l._)("button",{class:"list-item__edit",onClick:t=>this.$emit("showStageSetting",e.id)},null,8,ie),oe])))),128))])}var de={name:"StageList",props:{stagesData:Array},data(){return{}},methods:{}};const pe=(0,E.Z)(de,[["render",ne],["__scopeId","data-v-67db5d76"]]);var me=pe;const ce={class:"modal"},re={key:0,class:"modal__content"},_e={class:"modal__title"},ue={class:"add-phases"},ye={class:"phases__label"},he=(0,l._)("span",{class:"label__nameplate"},"Название этапа:",-1),ge={class:"emloyees-list"},ve=(0,l._)("span",{class:"label__nameplate"},"Выберите сотрудников для этого этапа:",-1),be=["value","onChange"],fe={class:"emloyee__wrapper"},we={class:"emloyee__label"},Se={class:"emloyee-name"},De={class:"emloyee__data"},ke=(0,l._)("span",{class:"emloyee__nameplate"},"Должность:",-1),Pe={class:"emloyee__data"},Le=(0,l._)("span",{class:"emloyee__nameplate"},"Кол-во дней:",-1),Ee=["onInput"],Ce={class:"emloyee__data"},Ue=(0,l._)("span",{class:"emloyee__nameplate"},"Стоимость дня:",-1),Ve={class:"emloyee__data"},$e=(0,l._)("span",{class:"emloyee__nameplate"},"Итого:",-1);function Ie(e,t,s,i,o,n){const d=(0,l.up)("phases-list");return(0,l.wg)(),(0,l.iD)("div",ce,[o.isShow?((0,l.wg)(),(0,l.iD)("div",re,[(0,l._)("div",_e,(0,m.zw)(s.selectedStage.name),1),(0,l.Wm)(d,{selectedStageId:s.selectedStage.id},null,8,["selectedStageId"]),(0,l._)("div",ue,[(0,l._)("label",ye,[he,(0,l.wy)((0,l._)("input",{type:"text",class:"label__field","onUpdate:modelValue":t[0]||(t[0]=e=>o.phasesName=e)},null,512),[[a.nr,o.phasesName]])]),(0,l._)("div",ge,[ve,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.$store.state.employeesData,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"emloyee",key:e.id},[(0,l._)("input",{class:"emloyee__select",type:"checkbox",name:"emloyee",value:e.id,onChange:t=>n.toggleEmloyeesList(e.id)},null,40,be),(0,l._)("div",fe,[(0,l._)("label",we,[(0,l._)("span",Se,(0,m.zw)(e.name),1)]),(0,l._)("label",De,[ke,(0,l._)("span",null,(0,m.zw)(e.position),1)]),(0,l._)("label",Pe,[Le,(0,l._)("input",{type:"number",class:"emloyee__days",onInput:t=>n.setEmployeeDays(t,e.id)},null,40,Ee)]),(0,l._)("div",Ce,[Ue,(0,l._)("span",null,(0,m.zw)(e.bid.toLocaleString("RU-ru"))+" KZT",1)]),(0,l._)("div",Ve,[$e,(0,l._)("span",null,(0,m.zw)(n.calcEmployeePrice(e.id))+" KZT",1)])])])))),128))])]),(0,l._)("p",null,"Стоимость этапа: "+(0,m.zw)(o.phasePrice.toLocaleString("RU-ru"))+" KZT",1),(0,l._)("button",{class:"btn add-phases__btn",onClick:t[1]||(t[1]=(...e)=>n.addPhase&&n.addPhase(...e))}," Добавить этап ")])])):(0,l.kq)("",!0)])}s(7658);const je=e=>((0,l.dD)("data-v-067211cd"),e=e(),(0,l.Cn)(),e),Me={class:"phases-list"},Ne={class:"wrap"},xe={class:"phases__title"},Oe=["onClick"],Ze=je((()=>(0,l._)("span",{class:"label__nameplate"},"Задействованные сотрудники:",-1))),Te={class:"emloyee__wrapper"},ze={class:"emloyee__label"},We={class:"emloyee-name"},Ke={class:"emloyee__data"},Ae=je((()=>(0,l._)("span",{class:"emloyee__nameplate"},"Должность:",-1))),Re={class:"emloyee__data"},Be=je((()=>(0,l._)("span",{class:"emloyee__nameplate"},"Кол-во дней:",-1))),Fe=["onUpdate:modelValue"],He={class:"emloyee__data"},Ye=je((()=>(0,l._)("span",{class:"emloyee__nameplate"},"Стоимость дня:",-1))),qe={class:"emloyee__data"},Xe=je((()=>(0,l._)("span",{class:"emloyee__nameplate"},"Итого:",-1))),Ge=["onClick"],Je={class:"emloyees-price"},Qe=je((()=>(0,l._)("hr",null,null,-1)));function et(e,t,s,i,o,n){const d=(0,l.up)("Select2"),p=(0,l.up)("slide-up-down");return(0,l.wg)(),(0,l.iD)("ul",Me,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.selectedStage.phases,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"phases-list__item",key:e.id},[(0,l._)("div",Ne,[(0,l._)("span",xe,(0,m.zw)(e.name),1),(0,l._)("button",{onClick:t=>e.show=!e.show,class:"modify-btn"},null,8,Oe)]),(0,l.Wm)(p,{modelValue:e.show,"onUpdate:modelValue":t=>e.show=t,duration:1e3,class:"emloyees-list"},{default:(0,l.w5)((()=>[Ze,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.emloyeesList,((t,s)=>((0,l.wg)(),(0,l.iD)("li",{class:"emloyee",key:s},[(0,l._)("div",Te,[(0,l._)("label",ze,[(0,l._)("span",We,(0,m.zw)(t.name),1)]),(0,l._)("label",Ke,[Ae,(0,l._)("span",null,(0,m.zw)(t.position),1)]),(0,l._)("label",Re,[Be,(0,l.wy)((0,l._)("input",{type:"number",class:"emloyee__days","onUpdate:modelValue":e=>t.workDays=e},null,8,Fe),[[a.nr,t.workDays]])]),(0,l._)("div",He,[Ye,(0,l._)("span",null,(0,m.zw)(t.bid.toLocaleString("RU-ru"))+" KZT",1)]),(0,l._)("div",qe,[Xe,(0,l._)("span",null,(0,m.zw)(n.calcEmployeePrice(e.id,t.id))+" KZT",1)])]),(0,l._)("button",{class:"list-item__remove",onClick:s=>n.removeWorker(e,t.id)}," X ",8,Ge)])))),128))]),n.selectOptionsList[e.id].length?((0,l.wg)(),(0,l.j4)(d,{key:0,modelValue:o.selectedEmployee,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedEmployee=e),options:n.selectOptionsList[e.id],settings:{placeholder:"Добавить сотрудника",minimumResultsForSearch:-1},onSelect:t=>n.addWorker(t,e.id)},null,8,["modelValue","options","onSelect"])):(0,l.kq)("",!0),(0,l._)("span",Je," Стоимость этапа:  "+(0,m.zw)(n.getPhasePrice(e.id))+" KZT ",1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128)),Qe])}var tt=s(1784),st=s(1411),at={name:"PhasesList",props:{selectedStageId:String},components:{Select2:tt.Z,SlideUpDown:st.Z},data(){return{selectedEmployee:""}},methods:{addWorker(e,t){const s=this.$store.state.employeesData.find((t=>t.id.toString()===e.id.toString())),a=Object.assign({},s),l=this.selectedStage.phases.find((e=>e.id.toString()===t.toString()));l.emloyeesList.push(a),this.selectedEmployee=""},removeWorker(e,t){e.emloyeesList=e.emloyeesList.filter((e=>e.id!==t))},calcEmployeePrice(e,t){const s=this.selectedStage.phases.map((s=>{if(s.id==e){const e=s.emloyeesList.find((e=>e.id===t)),a=e?.bid*e?.workDays||0;return e&&(e.employeePrice=a),a}})).join("");return(+s).toLocaleString("RU-ru")},getPhasePrice(e){const t=this.selectedStage.phases.find((t=>t.id.toString()===e.toString())),s=t.emloyeesList.reduce(((e,t)=>e+t.employeePrice),0);return(+s).toLocaleString("RU-ru")}},computed:{togglerData(){const e=this.selectedStage.phases.reduce(((e,t)=>(e[`${t.id}`]=!1,e)),{});return console.log(e),e},selectedStage:function(){const e=this.$store.state.stages.find((e=>e.id.toString()===this.selectedStageId.toString()));return e},selectOptionsList(){const e=this.$store.state.employeesData,t=this.selectedStage.phases;let s=t.map((t=>{const s=t.emloyeesList.map((e=>e.id)),a=new Set(s),l=e.filter((e=>!a.has(e.id)));return l}));const a=s.reduce(((e,s,a)=>{const l=s.map((e=>({id:e.id,text:e.name})));return e[`${t[a].id}`]=l,e}),{});return a}}};const lt=(0,E.Z)(at,[["render",et],["__scopeId","data-v-067211cd"]]);var it=lt,ot={name:"EditModal",components:{PhasesList:it},props:{selectedStage:Object},data(){return{data:this.appData,stageTitle:"",isShow:!0,phasesName:"",phasePrice:0,emloyeesList:[],emloyee:{}}},methods:{toggleEmloyeesList(e){this.emloyeesList=this.emloyeesList.filter((t=>t.id!==e)),setTimeout((()=>{this.calcPhasePrice()}),100)},setEmployeeDays(e,t){this.emloyeesList=this.emloyeesList.filter((e=>e.id!==t));const s=e.target.value,a=this.$store.state.employeesData.find((e=>e.id===t));this.emloyee=Object.assign(this.emloyee,a),this.emloyee.workDays=s,this.emloyeesList.push(this.emloyee),this.emloyee={},setTimeout((()=>{this.calcPhasePrice()}),100)},calcPhasePrice(){const e=this.emloyeesList.reduce(((e,t)=>e+t.employeePrice),0);this.phasePrice=e},calcEmployeePrice(e){const t=this.emloyeesList.find((t=>t.id===e)),s=t?.bid*t?.workDays||0;return t&&(t.employeePrice=s),s.toLocaleString("RU-ru")},addPhase(){this.emloyeesList.length<1||!this.phasesName.trim()||(this.$store.commit("addPhase",{id:this.selectedStage.id,data:{name:this.phasesName,id:`phaseId-${Math.random().toString(36).substring(2,9)}`,phasePrice:this.phasePrice,emloyeesList:this.emloyeesList}}),this.phasePrice=0,this.phasesName="",this.emloyeesList=[],this.isShow=!1,this.$nextTick((()=>{this.isShow=!0})))}}};const nt=(0,E.Z)(ot,[["render",Ie]]);var dt=nt,pt={name:"App",components:{EmployeesList:U,ProjectData:x,AddEmployee:Y,AddStage:se,StagesList:me,EditModal:dt},data(){return{showModal:!1,selectedStage:""}},methods:{showStageSetting(e){this.selectedStage=this.$store.state.stages.find((t=>t.id===e)),this.showModal=!0}}};const mt=(0,E.Z)(pt,[["render",p]]);var ct=mt,rt=s(65);const _t=(0,rt.MT)({state(){return{employeesData:[{id:0,name:"Натальчук Денис",position:"Управляющий студии",bid:30952},{id:1,name:"Медонин Евгений",position:"Программист",bid:23524},{id:2,name:"Кочнев Михаил",position:"Дизайнер",bid:14857},{id:3,name:"Арбузов Иван",position:"Специалист по непонятным вопросам",bid:13619},{id:4,name:"Монахов Владимир",position:"Копирайтер, контент-менеджер",bid:13e3},{id:5,name:"Тихонов Иван",position:"Верстальщик, программист",bid:14857}],stages:[{id:"0",name:"Стадия 1. Разработка технического задания на разработку корпоративного сайта",phases:[]},{id:"1",name:"Стадия 2. Сбор требований, анализ и систематизация требований Заказчика к сайту",phases:[]}]}},mutations:{addEmployee(e,t){e.employeesData.push(t)},remooveEmployee(e,t){e.employeesData=e.employeesData.filter((e=>e.id!=t))},modifyEmployee(e,t){const s=e.employeesData.find((e=>e.id===t));s.employeeModify=!s.employeeModify},addStage(e,t){e.stages.push(t)},addPhase(e,t){const s=e.stages.find((e=>e.id.toString()===t.id.toString()));s.phases.push(t.data)}}});var ut=_t;const yt=(0,a.ri)(ct);yt.use(ut),yt.mount("#app")}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,l,i){if(!a){var o=1/0;for(m=0;m<e.length;m++){a=e[m][0],l=e[m][1],i=e[m][2];for(var n=!0,d=0;d<a.length;d++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[d])}))?a.splice(d--,1):(n=!1,i<o&&(o=i));if(n){e.splice(m--,1);var p=l();void 0!==p&&(t=p)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[a,l,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],n=a[1],d=a[2],p=0;if(o.some((function(t){return 0!==e[t]}))){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(d)var m=d(s)}for(t&&t(a);p<o.length;p++)i=o[p],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(m)},a=self["webpackChunktable_generator"]=self["webpackChunktable_generator"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9644)}));a=s.O(a)})();
//# sourceMappingURL=app.9d9c1114.js.map